<!DOCTYPE html>
   <html lang="uk">
   <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>Звіт зміни</title>
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
       <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
       <style>
           table { width: 100%; border-collapse: collapse; margin-top: 20px; }
           th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
           th { background-color: #f2f2f2; }
           .btn { margin: 5px; }
           .selected { background-color: #e0e0e0; }
       </style>
       <script>
           let selectedRowId = null;

           function selectRow(rowId) {
               $('.table tbody tr').removeClass('selected');
               $(`#row_${rowId}`).addClass('selected');
               selectedRowId = rowId;
           }

           function addRow() {
               window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/add-row/`;
           }

           function editRow() {
               if (selectedRowId) {
                   window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/edit-row/${selectedRowId}/`;
               } else {
                   alert("Виберіть рядок для редагування");
               }
           }

           function deleteRow() {
               if (selectedRowId) {
                   if (confirm("Ви впевнені, що хочете видалити рядок?")) {
                       window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/delete-row/${selectedRowId}/`;
                   }
               } else {
                   alert("Виберіть рядок для видалення");
               }
           }

           function saveReport() {
               window.location.href = '/shift-reports/';
           }

           function printReport() {
               window.location.href = window.location.pathname + 'print/';
           }
       </script>
   </head>
   <body>
       <div class="container">
           <h1>Звіт зміни {{ shift_doc.doc_number }}</h1>
           {% if error %}
               <div class="alert alert-danger">{{ error }}</div>
           {% else %}
               <p>Дата: {{ shift_doc.doc_date|date:"Y-m-d" }}</p>
               <p>Початок: {{ shift_doc.begin_time|time:"H:i" }}</p>
               <p>Кінець: {{ shift_doc.end_time|time:"H:i" }}</p>
               <p>Лінія: {{ shift_doc.line_name }}</p>
               <p>Майстер: {{ shift_doc.foreman_name }}</p>
               <p>Статус: {% if shift_doc.draft %}Чернетка{% else %}Підтверджено{% endif %}</p>
               <table class="table">
                   <thead>
                       <tr>
                           <th>Row ID</th>
                           <th>Дизайн</th>
                           <th>Сорт</th>
                           <th>Брак</th>
                           <th>Кількість</th>
                           <th>Одиниця</th>
                           <th>Коробки</th>
                           <th>Палети</th>
                           {% comment %} <th>Площа палети</th> {% endcomment %}
                       </tr>
                   </thead>
                   <tbody>
                       {% for row in shift_rows %}
                           <tr id="row_{{ row.row_id }}" onclick="selectRow({{ row.row_id }})">
                               <td>{{ row.row_id }}</td>
                               <td>{{ row.design_name }}</td>
                               <td>{{ row.quality }}</td>
                               <td>{{ row.is_defect|yesno:"Так,Ні" }}</td>
                               <td>{{ row.amount|default:0|floatformat:"2" }}</td>
                               <td>{{ row.unit_alias|default:"" }}</td>
                               <td>{{ row.box_amount|default:0|floatformat:"2" }}</td>
                               <td>{{ row.package_amount|default:0|floatformat:"2" }}</td>
                               {% comment %} <td>{{ row.package_square|default:"N/A"|floatformat:"2" }}</td> {% endcomment %}
                           </tr>
                       {% empty %}
                           <tr><td colspan="9">Немає даних</td></tr>
                       {% endfor %}
                   </tbody>
               </table>
               <h2>Простої</h2>
               <table class="table">
                   <thead>
                       <tr>
                           <th>Row ID</th>
                           <th>Піч</th>
                           <th>Простой, хв.</th>
                           <th>Тип простою</th>
                           <th>Причина простою</th>
                           <th>Коментарій</th>
                       </tr>
                   </thead>
                   <tbody>
                       {% for downtime in downtimes %}
                           <tr>
                               <td>{{ downtime.row_id }}</td>
                               <td>{{ downtime.kiln_name }}</td>
                               <td>{{ downtime.amount|floatformat:"2" }}</td>
                               <td>{{downtime.stoppage_type_name}}</td>
                               <td>{{downtime.stoppage_cause}}</td>
                               <td>{{ downtime.comment }}</td>
                           </tr>
                       {% empty %}
                           <tr><td colspan="4">Немає простоїв</td></tr>
                       {% endfor %}
                   </tbody>
               </table>
               {% if can_edit %}
                   <button class="btn btn-primary" onclick="addRow()">Додати рядок</button>
                   <button class="btn btn-warning" onclick="editRow()">Редагувати рядок</button>
                   <button class="btn btn-danger" onclick="deleteRow()">Видалити рядок</button>
               {% endif %}
               <button class="btn btn-success" onclick="saveReport()">Зберегти звіт</button>
               <button class="btn btn-info" onclick="printReport()">Друк</button>
           {% endif %}
       </div>
   </body>
   </html>
{% comment %} <!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Звіт зміни</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .btn { margin: 5px; }
        .selected { background-color: #e0e0e0; }
    </style>
    <script>
        let selectedRowId = null;

        function selectRow(rowId) {
            $('.table tbody tr').removeClass('selected');
            $(`#row_${rowId}`).addClass('selected');
            selectedRowId = rowId;
        }

        function addRow() {
            window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/add-row/`;
        }

        function editRow() {
            if (selectedRowId) {
                window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/edit-row/${selectedRowId}/`;
            } else {
                alert("Виберіть рядок для редагування");
            }
        }

        function deleteRow() {
            if (selectedRowId) {
                if (confirm("Ви впевнені, що хочете видалити рядок?")) {
                    window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/delete-row/${selectedRowId}/`;
                }
            } else {
                alert("Виберіть рядок для видалення");
            }
        }

        function saveReport() {
            window.location.href = '/shift-reports/';
        }

        function printReport() {
            window.location.href = window.location.pathname + 'print/';
        }

        function refreshDesigns() {
            $.ajax({
                url: '/shift-reports/get-designs/',
                method: 'GET',
                success: function(data) {
                    alert("Дизайни оновлено: " + JSON.stringify(data.designs));
                },
                error: function(xhr) {
                    alert("Помилка оновлення дизайнів: " + xhr.responseJSON.error);
                }
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Звіт зміни</h1>
        {% if error %}
            <p class="text-danger">{{ error }}</p>
        {% else %}
            <p>Номер: {{ shift_doc.doc_number|default:"Немає номера" }}</p>
            <p>Дата: {{ shift_doc.doc_date|default:"Немає дати" }}</p>
            <p>Зміна: {{ shift_doc.shift_id|default:"Немає зміни" }}</p>
            <p>Лінія: {{ shift_doc.production_line_id|default:"Немає лінії" }}</p>
            <p>Час роботи: {{ shift_doc.begin_time|default:"" }} - {{ shift_doc.end_time|default:"" }}</p>
            <p>Майстер: {{ shift_doc.foreman_name|default:"Немає майстра" }}</p>
            <p>Всього: {{ shift_doc.total|default:0 }}</p>
            {% if can_edit %}
                <button class="btn btn-primary" onclick="saveReport()">Зберегти звіт</button>
                <button class="btn btn-secondary" onclick="printReport()">Друкувати звіт</button>
                <button class="btn btn-info" onclick="refreshDesigns()">Оновити дизайни</button>
                <button class="btn btn-success" onclick="addRow()">Додати рядок</button>
                <button class="btn btn-warning" onclick="editRow()">Редагувати рядок</button>
                <button class="btn btn-danger" onclick="deleteRow()">Видалити рядок</button>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#downtimeModal">Додати простій</button>
            {% endif %}

            <h2>Рядки звіту</h2>
            {% if shift_rows %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>№</th>
                            <th>Продукція</th>
                            <th>Сорт</th>
                            <th>Кількість (м²)</th>
                            <th>Од. вим.</th>
                            <th>Коробки</th>
                            <th>Палети</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in shift_rows %}
                            <tr id="row_{{ row.row_id }}" onclick="selectRow({{ row.row_id }})">
                                <td>{{ forloop.counter }}</td>
                                <td>{{ row.design_name|default:"Немає дизайну" }}</td>
                                <td>{{ row.quality|default:"Немає сорту" }}</td>
                                 <td>{{ row.amount|default:0|floatformat:"2" }}</td>
                                <td>{{ row.unit_alias|default:"м.кв." }}</td>
                                <td>{{ row.box_amount|default:0|floatformat:"2" }}</td>
                                <td>{{ row.package_amount|default:0|floatformat:"2" }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Рядки відсутні</p>
            {% endif %}

            <h2>Простої</h2>
            {% if downtimes %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>Піч</th>
                            <th>Простій, хв</th>
                            <th>Вид причини</th>
                            <th>Причина</th>
                            <th>Коментар</th>
                            {% if can_edit %}
                                <th>Дії</th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for downtime in downtimes %}
                            <tr>
                                <td>{{ downtime.kiln_id|default:"" }}</td>
                                <td>{{ downtime.amount|default:0 }}</td>
                                <td>{{ downtime.stoppage_cause_type_id|default:"" }}</td>
                                <td>{{ downtime.stoppage_cause|default:"" }}</td>
                                <td>{{ downtime.comment|default:"" }}</td>
                                {% if can_edit %}
                                    <td>
                                        <button class="btn btn-danger btn-sm" onclick="deleteDowntime({{ downtime.row_id }})">Видалити</button>
                                    </td>
                                {% endif %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Простої відсутні</p>
            {% endif %}

            <!-- Модальне вікно для простоїв -->
            <div class="modal fade" id="downtimeModal" tabindex="-1" aria-labelledby="downtimeModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="downtimeModalLabel">Додати простій</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрити"></button>
                        </div>
                        <div class="modal-body">
                            <p>Форма для додавання простою ще не реалізована</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
                            <button type="button" class="btn btn-primary" onclick="addDowntime()">Зберегти</button>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</body>
</html> {% endcomment %}
{% comment %} <!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Звіт зміни</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .btn { margin: 5px; }
        .selected { background-color: #e0e0e0; }
    </style>
    <script>
        let selectedRowId = null;

        function selectRow(rowId) {
            $('.table tbody tr').removeClass('selected');
            $(`#row_${rowId}`).addClass('selected');
            selectedRowId = rowId;
        }

        function addRow() {
            window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/add-row/`;
        }

        function editRow() {
            if (selectedRowId) {
                window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/edit-row/${selectedRowId}/`;
            } else {
                alert("Виберіть рядок для редагування");
            }
        }

        function deleteRow() {
            if (selectedRowId) {
                if (confirm("Ви впевнені, що хочете видалити рядок?")) {
                    window.location.href = `/shift-reports/{{ shift_doc.doc_id }}/delete-row/${selectedRowId}/`;
                }
            } else {
                alert("Виберіть рядок для видалення");
            }
        }

        function saveReport() {
            window.location.href = '/shift-reports/';
        }

        function printReport() {
            window.location.href = window.location.pathname + 'print/';
        }

        function refreshDesigns() {
            $.ajax({
                url: '/shift-reports/get-designs/',
                method: 'GET',
                success: function(data) {
                    alert("Дизайни оновлено: " + JSON.stringify(data.designs));
                },
                error: function(xhr) {
                    alert("Помилка оновлення дизайнів: " + xhr.responseJSON.error);
                }
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Звіт зміни</h1>
        {% if error %}
            <p class="text-danger">{{ error }}</p>
        {% else %}
            <p>Номер: {{ shift_doc.doc_number|default:"Немає номера" }}</p>
            <p>Дата: {{ shift_doc.doc_date|default:"Немає дати" }}</p>
            <p>Зміна: {{ shift_doc.shift_id|default:"Немає зміни" }}</p>
            <p>Лінія: {{ shift_doc.production_line_id|default:"Немає лінії" }}</p>
            <p>Час роботи: {{ shift_doc.begin_time|default:"" }} - {{ shift_doc.end_time|default:"" }}</p>
            <p>Майстер: {{ shift_doc.foreman_name|default:"Немає майстра" }}</p>
            <p>Всього: {{ shift_doc.total|default:0 }}</p>
            {% if can_edit %}
                <button class="btn btn-primary" onclick="saveReport()">Зберегти звіт</button>
                <button class="btn btn-secondary" onclick="printReport()">Друкувати звіт</button>
                <button class="btn btn-info" onclick="refreshDesigns()">Оновити дизайни</button>
                <button class="btn btn-success" onclick="addRow()">Додати рядок</button>
                <button class="btn btn-warning" onclick="editRow()">Редагувати рядок</button>
                <button class="btn btn-danger" onclick="deleteRow()">Видалити рядок</button>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#downtimeModal">Додати простій</button>
            {% endif %}

            <h2>Рядки звіту</h2>
            {% if shift_rows %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>№</th>
                            <th>Продукція</th>
                            <th>Сорт</th>
                            <th>Кількість (м²)</th>
                            <th>Од. вим.</th>
                            <th>Коробки</th>
                            <th>Палети</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in shift_rows %}
                        <tr id="row_{{ row.row_id }}" onclick="selectRow({{ row.row_id }})">
                            <td>{{ forloop.counter }}</td>
                            <td>{{ row.design_name|default:"Немає дизайну" }}</td>
                            <td>{{ row.quality|default:"Немає сорту" }}</td>
                            <td>{{ row.amount|default:0 }}</td>
                            <td>{{ row.unit_id|default:"" }}</td>
                            <td>{{ row.box_amount|default:0 }}</td>
                            <td>{{ row.package_amount|default:0 }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Рядки відсутні</p>
            {% endif %}

            <h2>Простої</h2>
            {% if downtimes %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>Піч</th>
                            <th>Простій, хв</th>
                            <th>Вид причини</th>
                            <th>Причина</th>
                            <th>Коментар</th>
                            {% if can_edit %}<th>Дії</th>{% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for downtime in downtimes %}
                        <tr>
                            <td>{{ downtime.kiln_id|default:"" }}</td>
                            <td>{{ downtime.amount|default:0 }}</td>
                            <td>{{ downtime.stoppage_cause_type_id|default:"" }}</td>
                            <td>{{ downtime.stoppage_cause|default:"" }}</td>
                            <td>{{ downtime.comment|default:"" }}</td>
                            {% if can_edit %}
                            <td>
                                <button class="btn btn-danger btn-sm" onclick="deleteDowntime({{ downtime.row_id }})">Видалити</button>
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Простої відсутні</p>
            {% endif %}

            <!-- Модальне вікно для простоїв -->
            <div class="modal fade" id="downtimeModal" tabindex="-1" aria-labelledby="downtimeModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="downtimeModalLabel">Додати простій</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрити"></button>
                        </div>
                        <div class="modal-body">
                            <p>Форма для додавання простою ще не реалізована</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
                            <button type="button" class="btn btn-primary" onclick="addDowntime()">Зберегти</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {%endif%}
    </body>
    </html> {% endcomment %}
{% comment %} <!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Звіт зміни</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .btn { margin: 5px; }
    </style>
    <script>
        function addRow() { alert("Функція додавання рядка ще не реалізована"); }
        function editRow(rowId) { alert("Функція редагування рядка ще не реалізована"); }
        function deleteRow(rowId) { alert("Функція видалення рядка ще не реалізована"); }
        function saveRow() { alert("Функція збереження рядка ще не реалізована"); }
        function cancelRow() { alert("Функція відміни ще не реалізована"); }
        function addDowntime() { alert("Функція додавання простою ще не реалізована"); }
        function deleteDowntime(rowId) { alert("Функція видалення простою ще не реалізована"); }
        function saveReport() { window.location.href = '/shift-reports/'; }
        function printReport() { window.location.href = window.location.pathname + 'print/'; }
        function refreshDesigns() {
            $.ajax({
                url: '/shift-reports/get-designs/',
                method: 'GET',
                success: function(data) {
                    alert("Дизайни оновлено: " + JSON.stringify(data.designs));
                },
                error: function(xhr) {
                    alert("Помилка оновлення дизайнів: " + xhr.responseJSON.error);
                }
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Звіт зміни</h1>
        {% if error %}
            <p class="text-danger">{{ error }}</p>
        {% else %}
            <p>Номер: {{ shift_doc.doc_number|default:"Немає номера" }}</p>
            <p>Дата: {{ shift_doc.doc_date|default:"Немає дати" }}</p>
            <p>Зміна: {{ shift_doc.shift_id|default:"Немає зміни" }}</p>
            <p>Лінія: {{ shift_doc.production_line_id|default:"Немає лінії" }}</p>
            <p>Час роботи: {{ shift_doc.begin_time|default:"" }} - {{ shift_doc.end_time|default:"" }}</p>
            <p>Майстер: {{ shift_doc.foreman_name|default:"Немає майстра" }}</p>
            <p>Всього: {{ shift_doc.total|default:0 }}</p>
            {% if can_edit %}
                <button class="btn btn-primary" onclick="saveReport()">Зберегти звіт</button>
                <button class="btn btn-secondary" onclick="printReport()">Друкувати звіт</button>
                <button class="btn btn-info" onclick="refreshDesigns()">Оновити дизайни</button>
                <button class="btn btn-success" onclick="addRow()">Додати рядок</button>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#downtimeModal">Додати простій</button>
            {% endif %}

            <h2>Рядки звіту</h2>
            {% if shift_rows %}
                <table>
                    <thead>
                        <tr>
                            <th>№</th>
                            <th>Продукція</th>
                            <th>Сорт</th>
                            <th>Кількість (м²)</th>
                            <th>Од. вим.</th>
                            <th>Коробки</th>
                            {% if can_edit %}<th>Дії</th>{% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in shift_rows %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ row.design_name|default:"Немає дизайну" }}</td>
                            <td>{{ row.quality|default:"Немає сорту" }}</td>
                            <td>{{ row.amount|default:0 }}</td>
                            <td>{{ row.unit_id|default:"" }}</td>
                            <td>{{ row.box_amount|default:0 }}</td>
                            {% if can_edit %}
                            <td>
                                <button class="btn btn-warning btn-sm" onclick="editRow({{ row.row_id }})">Редагувати</button>
                                <button class="btn btn-danger btn-sm" onclick="deleteRow({{ row.row_id }})">Видалити</button>
                                <button class="btn btn-success btn-sm" onclick="saveRow()">Зберегти</button>
                                <button class="btn btn-secondary btn-sm" onclick="cancelRow()">Відмінити</button>
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Рядки відсутні</p>
            {% endif %}

            <h2>Простої</h2>
            {% if downtimes %}
                <table>
                    <thead>
                        <tr>
                            <th>Піч</th>
                            <th>Простій, хв</th>
                            <th>Вид причини</th>
                            <th>Причина</th>
                            <th>Коментар</th>
                            {% if can_edit %}<th>Дії</th>{% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for downtime in downtimes %}
                        <tr>
                            <td>{{ downtime.kiln_id|default:"" }}</td>
                            <td>{{ downtime.amount|default:0 }}</td>
                            <td>{{ downtime.stoppage_cause_type_id|default:"" }}</td>
                            <td>{{ downtime.stoppage_cause|default:"" }}</td>
                            <td>{{ downtime.comment|default:"" }}</td>
                            {% if can_edit %}
                            <td>
                                <button class="btn btn-danger btn-sm" onclick="deleteDowntime({{ downtime.row_id }})">Видалити</button>
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Простої відсутні</p>
            {% endif %}
        {% endif %}

        <!-- Модальне вікно для простоїв -->
        <div class="modal fade" id="downtimeModal" tabindex="-1" aria-labelledby="downtimeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="downtimeModalLabel">Додати простій</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрити"></button>
                    </div>
                    <div class="modal-body">
                        <p>Форма для додавання простою ще не реалізована</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
                        <button type="button" class="btn btn-primary" onclick="addDowntime()">Зберегти</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> {% endcomment %}
