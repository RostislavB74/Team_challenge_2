{% extends "navigation/base.html" %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/table_styles.css' %}">

{% block title %}–§—ñ—Ä–º–∏{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="text-center my-4">–§—ñ—Ä–º–∏</h1>
    <form method="get">
        <input type="text" name="search" placeholder="–ü–æ—à—É–∫..." value="{{ search|default:'' }}">
        <button type="submit">üîç</button>
    </form>
    <div class="table-container">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>
                        <a href="?sort=firms_id&dir={% if sort == 'firms_id' and dir == 'asc' %}desc{% else %}asc{% endif %}{% if search %}&search={{ search }}{% endif %}">
                            –ö–æ–¥
                            {% if sort == 'firms_id' %}
                                {% if dir == 'asc' %}‚Üë{% else %}‚Üì{% endif %}
                            {% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=name&dir={% if sort == 'name' and dir == 'asc' %}desc{% else %}asc{% endif %}{% if search %}&search={{ search }}{% endif %}">
                            –ù–∞–∑–≤–∞ —Ñ—ñ—Ä–º–∏
                            {% if sort == 'name' %}
                                {% if dir == 'asc' %}‚Üë{% else %}‚Üì{% endif %}
                            {% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=section__name&dir={% if sort == 'section__name' and dir == 'asc' %}desc{% else %}asc{% endif %}{% if search %}&search={{ search }}{% endif %}">
                            –†–æ–∑–¥—ñ–ª
                            {% if sort == 'section__name' %}
                                {% if dir == 'asc' %}‚Üë{% else %}‚Üì{% endif %}
                            {% endif %}
                        </a>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for firm in page_obj %}
                    <tr>
                        <td>{{ firm.firms_id|default:"-" }}</td>
                        <td>{{ firm.name|default:"-" }}</td>
                        <td>{{ firm.section.name|default:"-" }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="3">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% include "tiles/pagination_partial.html" %}
</div>
{% endblock %}